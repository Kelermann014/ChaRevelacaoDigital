<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch√° Revela√ß√£o Digital üë∂üåà</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-gradient: linear-gradient(-45deg, #FF9A9E, #FECFEF, #A18CD1, #FBC2EB);
            --card-white: rgba(255, 255, 255, 0.95);
            --blue: #3498DB;
            --pink: #E91E63;
            --text: #444;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 10s ease infinite;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .card-container {
            background: var(--card-white);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 420px;
            overflow: hidden;
            text-align: center;
            position: relative;
        }

        .header-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            /* Imagem de Capa Fixa (C√©u/Nuvens) */
            background-image: url('https://images.unsplash.com/photo-1519689680058-324335c77eba?auto=format&fit=crop&w=800&q=80'); 
            background-position: center;
        }

        .content { padding: 25px; }

        h1 { font-family: 'Fredoka', sans-serif; color: var(--text); font-size: 1.8rem; margin-top: 0; }
        p { color: #666; font-size: 1rem; margin-bottom: 20px; }

        .btn-option {
            background: white;
            border: 2px solid #eee;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
            width: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-align: left;
        }
        .btn-option:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        .emoji-icon {
            font-size: 2rem; margin-right: 15px;
            background: #f4f4f4; width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%;
        }

        /* Classes Utilit√°rias */
        .hidden { display: none !important; }
        
        /* Imagens Redondas */
        .baby-photo {
            width: 160px; height: 160px;
            border-radius: 50%; object-fit: cover;
            border: 6px solid white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            margin: 0 auto 15px auto;
            display: block;
        }

        .pulse { animation: pulse 1s infinite; font-size: 3rem; margin-top: 10px; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* Cores Finais */
        .theme-boy h1 { color: var(--blue); }
        .theme-girl h1 { color: var(--pink); }

        /* Input Link */
        .link-box {
            background: #eee; padding: 10px; border-radius: 8px;
            font-size: 0.8rem; word-break: break-all; margin: 10px 0;
            font-family: monospace; user-select: all;
        }
    </script>
    <style>
        /* Bot√µes de configura√ß√£o */
        .setup-btn { width: 48%; padding: 12px; border:none; border-radius: 50px; color:white; font-weight:bold; cursor:pointer; }
    </style>
</head>
<body>

    <div class="card-container" id="mainCard">
        <div class="header-img"></div>
        
        <div class="content">
            
            <div id="step-home">
                <h1>Quem √© voc√™? ü§î</h1>
                <p>Selecione seu papel na revela√ß√£o:</p>
                
                <button class="btn-option" id="btn-guardian" onclick="handleRole('keeper')">
                    <div class="emoji-icon">ü§´</div>
                    <div><strong>Sei o sexo do beb√™</strong><br><small>Criar o link secreto</small></div>
                </button>

                <button class="btn-option" onclick="handleRole('viewer', 5000)">
                    <div class="emoji-icon">üë™</div>
                    <div><strong>Sou Pai / M√£e</strong><br><small>Emo√ß√£o (5 seg)</small></div>
                </button>

                <button class="btn-option" onclick="handleRole('viewer', 3000)">
                    <div class="emoji-icon">üéâ</div>
                    <div><strong>Convidado</strong><br><small>Ver resultado (3 seg)</small></div>
                </button>
            </div>

            <div id="step-setup" class="hidden">
                <h1>Configurar Resultado</h1>
                <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                    <button class="setup-btn" style="background:var(--blue)" onclick="generateLink('menino')">MENINO üíô</button>
                    <button class="setup-btn" style="background:var(--pink)" onclick="generateLink('menina')">MENINA üíñ</button>
                </div>
                
                <div id="result-link-area" class="hidden">
                    <p><strong>Envie este link para todos:</strong></p>
                    <div class="link-box" id="shareLink">...</div>
                    <button class="setup-btn" style="background:#555; width:100%" onclick="copyLink()">Copiar Link üìã</button>
                </div>
            </div>

            <div id="step-suspense" class="hidden">
                <img src="https://images.unsplash.com/photo-1519727407427-04e38ce71304?auto=format&fit=crop&w=400&q=80" class="baby-photo" alt="Pensando...">
                <h2 id="suspense-text" style="color:#888">Carregando...</h2>
                <div class="pulse">‚ù§Ô∏è</div>
            </div>

            <div id="step-reveal" class="hidden">
                <img id="reveal-img" class="baby-photo" src="" style="width:200px; height:200px; border-width:8px;">
                
                <h1 id="reveal-title" style="font-size: 2.5rem; margin: 10px 0;"></h1>
                <p>Parab√©ns √† fam√≠lia! ‚ú®</p>
                <button class="btn-option" onclick="location.reload()" style="justify-content:center;">Ver de novo ‚Ü∫</button>
            </div>

            <div id="step-error" class="hidden">
                <div style="font-size:3rem">üöß</div>
                <h3>Aguardando Configura√ß√£o</h3>
                <p>O link ainda n√£o foi gerado pelo guardi√£o do segredo.</p>
            </div>

        </div>
    </div>

    <script>
        /* --- √ÅREA PARA TROCAR FOTOS --- 
           Para usar suas fotos:
           1. Salve as fotos na mesma pasta do arquivo index.html no GitHub.
           2. Nomeie como: 'menino.jpg' e 'menina.jpg'.
           3. Mude os links abaixo para './menino.jpg' e './menina.jpg'.
        */
        const imgBoy = "https://wallpapers.com/images/high/funny-face-pictures-69n5i4m2fwnsuska.webp"; // Foto Menino (Exemplo)
        const imgGirl = "https://wallpapers.com/images/high/cute-baby-pictures-3r539emcfhb04ft4.webp"; // Foto Menina (Exemplo)
        // ------------------------------

        const urlParams = new URLSearchParams(window.location.search);
        const secret = urlParams.get('s');

        if (secret) {
            const btn = document.getElementById('btn-guardian');
            if(btn) btn.style.display = 'none';
        }

        function handleRole(role, delay) {
            if (role === 'keeper') showScreen('step-setup');
            else {
                if (!secret) showScreen('step-error');
                else startSuspense(delay);
            }
        }

        function generateLink(gender) {
            const code = btoa(gender);
            const url = window.location.href.split('?')[0] + '?s=' + code;
            document.getElementById('shareLink').innerText = url;
            document.getElementById('result-link-area').classList.remove('hidden');
        }

        function copyLink() {
            navigator.clipboard.writeText(document.getElementById('shareLink').innerText);
            alert("Link copiado!");
        }

        function startSuspense(time) {
            showScreen('step-suspense');
            const msgs = ["Consultando a cegonha...", "Lendo o DNA...", "Contando os dedinhos...", "Quase l√°..."];
            let i = 0;
            const interval = setInterval(() => {
                document.getElementById('suspense-text').innerText = msgs[i++ % msgs.length];
            }, 800);

            setTimeout(() => { clearInterval(interval); revealNow(); }, time);
        }

        function revealNow() {
            try {
                const gender = atob(secret);
                const img = document.getElementById('reveal-img');
                const title = document.getElementById('reveal-title');
                
                showScreen('step-reveal');

                if (gender === 'menino') {
                    title.innerText = "√â UM MENINO!";
                    img.src = imgBoy;
                    document.getElementById('mainCard').classList.add('theme-boy');
                    fireConfetti('#3498DB');
                } else {
                    title.innerText = "√â UMA MENINA!";
                    img.src = imgGirl;
                    document.getElementById('mainCard').classList.add('theme-girl');
                    fireConfetti('#E91E63');
                }
            } catch (e) { showScreen('step-error'); }
        }

        function fireConfetti(color) {
            const end = Date.now() + 3000;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 }, colors: [color, 'white'] });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 }, colors: [color, 'white'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }

        function showScreen(id) {
            document.querySelectorAll('.content > div').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }
    </script>
</body>
</html>
